"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4925],{84952:function(e,n,t){t.d(n,{CF:function(){return r},zq:function(){return a},JW:function(){return i},Rr:function(){return o},dZ:function(){return u}});var r="button_clicked",a="button_clicked",i="doubleRange_values_changed",o="range_values_changed",u="search_query"},89194:function(e,n,t){t.d(n,{fT:function(){return s},NN:function(){return y},qk:function(){return b},qi:function(){return d},T4:function(){return f}});var r=t(92809),a=t(52209),i=t(95990),o=t(17626);function u(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function c(){var e=(0,a.Z)(['\n  query SearchEditionListingsDefault(\n    $bySets: [ID]\n    $byLeagues: [League]\n    $byPlayers: [ID]\n    $byTeams: [ID]\n    $byPrimaryPlayerPosition: [PlayerPosition]\n    $byPlayCategory: [ID]\n    $byPrice: PriceRangeFilterInput\n    $bySerialNumber: IntegerRangeFilterInput\n    $byGameDate: DateRangeFilterInput\n    $byCreatedAt: DateRangeFilterInput\n    $bySetVisuals: [VisualIdType]\n    $byPlayTagIDs: [ID]\n    $byPlayIDs: [ID]\n    $bySetPlayTagIDs: [ID]\n    $bySeries: [ID]\n    $byActiveChallenge: [ID]\n    $orderBy: EditionListingSortType\n    $searchInput: BaseSearchInput!\n    $userID: ID\n  ) {\n    searchEditionListings(\n      input: {\n        filters: {\n          bySets: $bySets\n          byLeagues: $byLeagues\n          byPlayers: $byPlayers\n          byTeams: $byTeams\n          byPrimaryPlayerPosition: $byPrimaryPlayerPosition\n          byPlayCategory: $byPlayCategory\n          byPrice: $byPrice\n          bySerialNumber: $bySerialNumber\n          byGameDate: $byGameDate\n          byCreatedAt: $byCreatedAt\n          bySetVisuals: $bySetVisuals\n          byPlayTagIDs: $byPlayTagIDs\n          byPlayIDs: $byPlayIDs\n          bySetPlayTagIDs: $bySetPlayTagIDs\n          bySeries: $bySeries\n          byActiveChallenge: $byActiveChallenge\n        }\n        sortBy: $orderBy\n        searchInput: $searchInput\n        userID: $userID\n      }\n    ) {\n      data {\n        filters {\n          bySets\n          byLeagues\n          byPlayers\n          byTeams\n          byPrimaryPlayerPosition\n          byPlayCategory\n          byPrice {\n            min\n            max\n          }\n          bySerialNumber {\n            min\n            max\n          }\n          byGameDate {\n            start\n            end\n          }\n          byCreatedAt {\n            start\n            end\n          }\n          bySetVisuals\n          byPlayIDs\n          byPlayTagIDs\n          bySetPlayTagIDs\n          bySeries\n          byActiveChallenge\n        }\n        searchSummary {\n          pagination {\n            leftCursor\n            rightCursor\n          }\n          data {\n            ... on EditionListings {\n              size\n              data {\n                ... on EditionListing {\n                  ...EditionFragment\n                  # @NOTE: these fields support automated cache\n                  # look ups for the query "getEditionListing" in:\n                  # domains/momentListing/constants/defaults\n                  # if you need more information here, add it to\n                  # the fragment "EditionFragment"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ',"\n"]);return c=function(){return e},e}function l(){var e=(0,a.Z)(["\n  query GetActiveChallengesWithNames {\n    getActiveChallenges {\n      challenges {\n        id\n        name\n        expirationDate\n      }\n    }\n  }\n"]);return l=function(){return e},e}var s=(0,i.ZP)(l()),y=(0,i.ZP)(c(),o.OS),b={UPDATED_AT_DESC:{value:"UPDATED_AT_DESC",label:"PageSearch.orderBy.createdAtDesc"},UPDATED_AT_ASC:{value:"UPDATED_AT_ASC",label:"PageSearch.orderBy.createdAtAsc"},SERIAL_NUMBER_ASC:{value:"SERIAL_NUMBER_ASC",label:"PageSearch.orderBy.listingsBySerialNumberAsc"},PRICE_USD_ASC:{value:"PRICE_USD_ASC",label:"PageSearch.orderBy.priceUsdAsc"},PRICE_USD_DESC:{value:"PRICE_USD_DESC",label:"PageSearch.orderBy.priceUsdDesc"},GAME_DATE_ASC:{value:"GAME_DATE_ASC",label:"PageSearch.orderBy.gameDateAsc"},GAME_DATE_DESC:{value:"GAME_DATE_DESC",label:"PageSearch.orderBy.gameDateDesc"}},d={byLeagues:[],byPlayers:[],byTagNames:[],byPlayTagIDs:[],bySetPlayTagIDs:[],byTeams:[],bySets:[],bySeries:[],bySetVisuals:[],byGameDate:{start:null,end:null},byCreatedAt:{start:null,end:null},byPower:{min:null,max:null},byPrice:{min:null,max:null},byPlayStyle:[],bySkill:[],byPrimaryPlayerPosition:[],byPlayCategory:[],byActiveChallenge:[],bySerialNumber:{min:null,max:null},byPlays:[],byPlayIDs:[],searchInput:{pagination:{cursor:"",direction:"RIGHT",limit:12}},orderBy:b.UPDATED_AT_DESC.value},f=function(){return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?u(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({},d)}},54925:function(e,n,t){t.d(n,{Z:function(){return S}});var r=t(20273),a=t(92809),i=t(8132),o=t(67294),u=t(96486),c=t(91717),l=t(37176),s=t(46829),y=t(76752),b=t(43423),d=t(228),f=t(84952),g=t(89194),P=t(55381),v=t(34640);function m(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function D(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?m(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function S(e){var n,t,m=e.query,S=e.variables,h=void 0===S?g.qi:S,p=e.withUrl,E=void 0!==p&&p,O=e.onUpdateQuery,I=e.urlQuery,C=(0,i.Z)(e,["query","variables","withUrl","onUpdateQuery","urlQuery"]),A=(0,b.Z)().track,_=(0,c.gV)(),T=(0,d.Z)(),$=T.currentUser,j=T.currentUserFsm,R=T.FS,w=null!==m&&void 0!==m?m:g.NN,L=E?I:h,N=(0,o.useState)(L),U=N[0],k=N[1],G=(0,o.useState)(null),F=G[0],M=G[1],Z=(0,s.useQuery)(w,D(D({variables:D(D({},(0,v.rP)(L)),{},{userID:null===$||void 0===$||null===(n=$.publicInfo)||void 0===n?void 0:n.dapperID})},C),{},{nextFetchPolicy:null!==(t=C.nextFetchPolicy)&&void 0!==t?t:"cache-first",skip:(null===C||void 0===C?void 0:C.skip)||j===R.FETCHING})),B=Z.loading,q=Z.error,x=Z.data,z=Z.refetch,Q=Z.fetchMore,V="searchEditionListings",H=(0,u.get)(x,"".concat(V,".data.searchSummary.pagination.rightCursor")),W=!!H,J=(0,o.useState)(!1),Y=J[0],K=J[1],X=(0,o.useMemo)((function(){return B?P.E.LOADING:Y?P.E.FETCHING_MORE:q?P.E.ERROR:x?P.E.SUCCESS:P.E.IDLE}),[B,q,x,Y]);(0,o.useEffect)((function(){E&&k(I)}),[I,E]);var ee=(0,l.Z)(U),ne=!!ee&&!(0,u.isEqual)(ee,U);(0,o.useEffect)((function(){ne&&(A(f.dZ,(0,v.id)(U)),z((0,v.rP)(U)))}),[ee,U,_]);var te=(0,o.useCallback)((function(e){var n=(0,v.IC)(h,U,e);if(E)return O(n);k(n)}),[O,U,h,E]),re=(0,o.useCallback)((function(){var e=(0,v.IC)(h,U),n=(0,v.v4)(e,{"searchInput.pagination.cursor":H});A("Fetched more moment listings in marketplace"),K(!0),Q({QUERY:w,variables:(0,v.rP)(n),updateQuery:function(e,n){var t,i=n.fetchMoreResult,o=(0,u.get)(e,"".concat(V,".data.searchSummary.data.data")),c=(0,u.get)(i,"".concat(V,".data.searchSummary.data.data"));o&&c||(0,y.Tb)(new Error("Cannot read property ".concat(V," of undefined")),{errorInfo:{previousResultData:o,fetchMoreResultData:c}});var l=[].concat((0,r.Z)(null!==o&&void 0!==o?o:[]),(0,r.Z)(null!==c&&void 0!==c?c:[])),s=(0,v.v4)(e,(t={},(0,a.Z)(t,"".concat(V,".data.searchSummary.pagination"),(0,u.get)(i,"".concat(V,".data.searchSummary.pagination"))),(0,a.Z)(t,"".concat(V,".data.searchSummary.data.size"),(0,u.get)(i,"".concat(V,".data.searchSummary.data.size"))),(0,a.Z)(t,"".concat(V,".data.searchSummary.data.data"),l),t));return K(!1),s}})}),[w,Q,V,U,H,A,h]),ae=U,ie=U.orderBy,oe=(0,u.get)(x,"searchEditionListings.data.searchSummary.data.data"),ue=(0,u.get)(x,"searchEditionListings.data.searchSummary.count.count");(0,o.useEffect)((function(){X===P.E.SUCCESS&&M(oe)}),[X,x,oe]);var ce=W&&X!==P.E.LOADING&&X!==P.E.FETCHING_MORE;return{fsm:X,FS:P.E,loading:B,error:q,moments:F,filters:ae,orderBy:ie,count:ue,onFiltersChange:te,onFetchMore:{handler:re,enabled:ce,isEnabled:ce,isLoading:X===P.E.LOADING,isLoadingMore:X===P.E.FETCHING_MORE,isError:X===P.E.ERROR,isNoMoreResults:!W},onSortChange:te}}},34640:function(e,n,t){t.d(n,{IC:function(){return y},rP:function(){return f},v4:function(){return g},id:function(){return P},u_:function(){return m},Lv:function(){return D}});var r=t(92809),a=t(89194),i=t(96486),o=t(45041),u=t(81856),c=t(76752);function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.qi,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=s({},e);return Object.keys(n).forEach((function(e){void 0!==n[e]&&(r[e]=n[e])})),Object.keys(t).forEach((function(e){void 0!==t[e]&&(r[e]=t[e])})),r}function b(e){if(!e)return null;try{return new Date(e).toISOString()}catch(n){return(0,c.Tb)(n),null}}var d=function(e){if(!e)return null;var n=new Date(e);return n.setUTCHours(23,59,59),n};function f(e){var n=null===e||void 0===e?void 0:e.byGameDate,t=null===e||void 0===e?void 0:e.byCreatedAt,r=null===e||void 0===e?void 0:e.byPrice;return s(s({},e),{byGameDate:{start:b((0,u.zW)(null===n||void 0===n?void 0:n.start)),end:b((0,u.zW)(d(null===n||void 0===n?void 0:n.end)))},byCreatedAt:{start:b(null===t||void 0===t?void 0:t.start),end:b(d(null===t||void 0===t?void 0:t.end))},byPrice:{min:(null===r||void 0===r?void 0:r.min)?r.min.toString(10):null,max:(null===r||void 0===r?void 0:r.max)?r.max.toString(10):null}})}function g(e,n){var t=(0,i.cloneDeep)(e);return Object.keys(n).forEach((function(e){var r=n[e];(0,i.set)(t,e,r)})),t}function P(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.qi,t={};return Object.keys(e).forEach((function(r){if(!(0,o.M7)(e[r])||!(0,o.M7)(n[r]))return n.hasOwnProperty(r)&&(0,i.isEqual)(e[r],n[r])?void 0:t[r]=e[r]})),t}var v=function(e){return(0,u.Gz)(e)>18e4},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter((function(e){return v(null===e||void 0===e?void 0:e.expirationDate)}))},D=function(e){return Math.max((0,u.Gz)(e)-18e4)}}}]);